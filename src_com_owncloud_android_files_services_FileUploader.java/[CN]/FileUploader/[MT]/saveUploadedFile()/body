{
  OCFile file=mCurrentUpload.getFile();
  if (file.fileExists()) {
    file=mStorageManager.getFileById(file.getFileId());
  }
  long syncDate=System.currentTimeMillis();
  file.setLastSyncDateForData(syncDate);
  ReadRemoteFileOperation operation=new ReadRemoteFileOperation(mCurrentUpload.getRemotePath());
  RemoteOperationResult result=operation.execute(mUploadClient);
  if (result.isSuccess()) {
    updateOCFile(file,(RemoteFile)result.getData().get(0));
    file.setLastSyncDateForProperties(syncDate);
  }
 else {
    Log_OC.e(TAG,"Error reading properties of file after successful upload; this is gonna hurt...");
  }
  if (mCurrentUpload.wasRenamed()) {
    OCFile oldFile=mCurrentUpload.getOldFile();
    if (oldFile.fileExists()) {
      oldFile.setStoragePath(null);
      mStorageManager.saveFile(oldFile);
      mStorageManager.saveConflict(oldFile,null);
    }
  }
  file.setNeedsUpdateThumbnail(true);
  mStorageManager.saveFile(file);
  mStorageManager.saveConflict(file,null);
  mStorageManager.triggerMediaScan(file.getStoragePath());
}
