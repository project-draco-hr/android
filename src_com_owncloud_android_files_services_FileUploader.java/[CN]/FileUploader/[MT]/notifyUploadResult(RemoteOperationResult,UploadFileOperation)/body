{
  if (uploadResult.isCancelled()) {
    mNotificationManager.cancel(R.string.uploader_upload_in_progress_ticker);
  }
 else   if (uploadResult.isSuccess()) {
    mNotification.flags^=Notification.FLAG_ONGOING_EVENT;
    mNotification.flags|=Notification.FLAG_AUTO_CANCEL;
    mNotification.contentView=mDefaultNotificationContentView;
    Intent showDetailsIntent=new Intent(this,FileDetailActivity.class);
    showDetailsIntent.putExtra(FileDetailFragment.EXTRA_FILE,upload.getFile());
    showDetailsIntent.putExtra(FileDetailFragment.EXTRA_ACCOUNT,upload.getAccount());
    showDetailsIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    mNotification.contentIntent=PendingIntent.getActivity(getApplicationContext(),(int)System.currentTimeMillis(),showDetailsIntent,0);
    mNotification.setLatestEventInfo(getApplicationContext(),getString(R.string.uploader_upload_succeeded_ticker),String.format(getString(R.string.uploader_upload_succeeded_content_single),upload.getFileName()),mNotification.contentIntent);
    mNotificationManager.notify(R.string.uploader_upload_in_progress_ticker,mNotification);
  }
 else {
    mNotificationManager.cancel(R.string.uploader_upload_in_progress_ticker);
    Notification finalNotification=new Notification(R.drawable.icon,getString(R.string.uploader_upload_failed_ticker),System.currentTimeMillis());
    finalNotification.flags|=Notification.FLAG_AUTO_CANCEL;
    if (uploadResult.getCode() == ResultCode.UNAUTHORIZED) {
      Intent updateAccountCredentials=new Intent(this,AuthenticatorActivity.class);
      updateAccountCredentials.putExtra(AuthenticatorActivity.EXTRA_ACCOUNT,upload.getAccount());
      updateAccountCredentials.putExtra(AuthenticatorActivity.EXTRA_ACTION,AuthenticatorActivity.ACTION_UPDATE_TOKEN);
      updateAccountCredentials.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      updateAccountCredentials.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
      updateAccountCredentials.addFlags(Intent.FLAG_FROM_BACKGROUND);
      finalNotification.contentIntent=PendingIntent.getActivity(this,(int)System.currentTimeMillis(),updateAccountCredentials,PendingIntent.FLAG_ONE_SHOT);
      mUploadClient=null;
    }
 else {
      finalNotification.contentIntent=PendingIntent.getActivity(getApplicationContext(),(int)System.currentTimeMillis(),new Intent(),0);
    }
    String content=null;
    if (uploadResult.getCode() == ResultCode.LOCAL_STORAGE_FULL || uploadResult.getCode() == ResultCode.LOCAL_STORAGE_NOT_COPIED) {
      content=String.format(getString(R.string.error__upload__local_file_not_copied),upload.getFileName(),getString(R.string.app_name));
    }
 else {
      content=String.format(getString(R.string.uploader_upload_failed_content_single),upload.getFileName());
    }
    finalNotification.setLatestEventInfo(getApplicationContext(),getString(R.string.uploader_upload_failed_ticker),content,finalNotification.contentIntent);
    mNotificationManager.notify(R.string.uploader_upload_failed_ticker,finalNotification);
  }
}
