{
switch (v.getId()) {
case R.id.uploader_choose_folder:
    String pathToUpload=null;
  if (mParents.empty()) {
    pathToUpload="/";
  }
 else {
    mCursor=managedQuery(Uri.withAppendedPath(ProviderTableMeta.CONTENT_URI_FILE,mParents.peek()),null,null,null,null);
    mCursor.moveToFirst();
    pathToUpload=mCursor.getString(mCursor.getColumnIndex(ProviderTableMeta.FILE_PATH)).replace(" ","%20");
  }
Log.d(TAG,"Uploading file to dir " + pathToUpload);
mUploadPath="";
for (String s : pathToUpload.split("/")) mUploadPath="/" + URLEncoder.encode(s);
if (!mUploadPath.endsWith("/")) mUploadPath+="/";
mCreateDir=false;
uploadFiles();
break;
case android.R.id.button1:
showDialog(DIALOG_GET_DIRNAME);
break;
default :
throw new IllegalArgumentException("Wrong element clicked");
}
}
