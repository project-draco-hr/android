{
  super.onCreate(savedInstanceState);
  getWindow().requestFeature(Window.FEATURE_NO_TITLE);
  mParents=new Stack<String>();
  if (getIntent().hasExtra(Intent.EXTRA_STREAM)) {
    prepareStreamsToUpload();
    mAccountManager=(AccountManager)getSystemService(Context.ACCOUNT_SERVICE);
    Account[] accounts=mAccountManager.getAccountsByType(AccountAuthenticator.ACCOUNT_TYPE);
    if (accounts.length == 0) {
      Log.i(TAG,"No ownCloud account is available");
      showDialog(DIALOG_NO_ACCOUNT);
    }
 else     if (accounts.length > 1) {
      Log.i(TAG,"More then one ownCloud is available");
      showDialog(DIALOG_MULTIPLE_ACCOUNT);
    }
 else {
      mAccount=accounts[0];
      setContentView(R.layout.uploader_layout);
      populateDirectoryList();
    }
  }
 else {
    showDialog(DIALOG_NO_STREAM);
  }
}
