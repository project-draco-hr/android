{
  if (ACTION_SYNC_FOLDER.equals(intent.getAction())) {
    if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_REMOTE_PATH)) {
      Log_OC.e(TAG,"Not enough information provided in intent");
      return START_NOT_STICKY;
    }
    Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
    OCFile file=intent.getParcelableExtra(EXTRA_REMOTE_PATH);
    Pair<Account,OCFile> itemSyncKey=new Pair<Account,OCFile>(account,file);
    Pair<Target,RemoteOperation> itemToQueue=newOperation(intent);
    if (itemToQueue != null) {
      mSyncFolderHandler.add(account,file,(SynchronizeFolderOperation)itemToQueue.second);
      Message msg=mSyncFolderHandler.obtainMessage();
      msg.arg1=startId;
      msg.obj=itemSyncKey;
      mSyncFolderHandler.sendMessage(msg);
    }
  }
 else   if (ACTION_CANCEL_SYNC_FOLDER.equals(intent.getAction())) {
    if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_REMOTE_PATH)) {
      Log_OC.e(TAG,"Not enough information provided in intent");
      return START_NOT_STICKY;
    }
    Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
    OCFile file=intent.getParcelableExtra(EXTRA_REMOTE_PATH);
    mSyncFolderHandler.cancel(account,file);
  }
 else {
    Message msg=mOperationsHandler.obtainMessage();
    msg.arg1=startId;
    mOperationsHandler.sendMessage(msg);
  }
  return START_NOT_STICKY;
}
