{
  if (ACTION_SYNC_FOLDER.equals(intent.getAction())) {
    if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_REMOTE_PATH)) {
      Log_OC.e(TAG,"Not enough information provided in intent");
      return START_NOT_STICKY;
    }
    Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
    String remotePath=intent.getStringExtra(EXTRA_REMOTE_PATH);
    Pair<Account,String> itemSyncKey=new Pair<Account,String>(account,remotePath);
    Pair<Target,RemoteOperation> itemToQueue=newOperation(intent);
    if (itemToQueue != null) {
      mSyncFolderHandler.add(account,remotePath,(SynchronizeFolderOperation)itemToQueue.second);
      mSyncFolderHandler.sendBroadcastNewSyncFolder(account,remotePath);
      Message msg=mSyncFolderHandler.obtainMessage();
      msg.arg1=startId;
      msg.obj=itemSyncKey;
      mSyncFolderHandler.sendMessage(msg);
    }
  }
 else   if (ACTION_CANCEL_SYNC_FOLDER.equals(intent.getAction())) {
    if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_FILE)) {
      Log_OC.e(TAG,"Not enough information provided in intent");
      return START_NOT_STICKY;
    }
    final Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
    final OCFile file=intent.getParcelableExtra(EXTRA_FILE);
    new Thread(new Runnable(){
      public void run(){
        mSyncFolderHandler.cancel(account,file);
      }
    }
).start();
  }
 else {
    Message msg=mOperationsHandler.obtainMessage();
    msg.arg1=startId;
    mOperationsHandler.sendMessage(msg);
  }
  return START_NOT_STICKY;
}
