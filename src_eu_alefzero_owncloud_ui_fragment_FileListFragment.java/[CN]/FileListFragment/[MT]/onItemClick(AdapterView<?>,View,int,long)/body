{
  if (mFiles.size() <= position) {
    throw new IndexOutOfBoundsException("Incorrect item selected");
  }
  OCFile file=mFiles.get(position);
  if (file.getMimetype().equals("DIR")) {
    String dirname=file.getFileName();
    mDirNames.push(dirname);
    ((FileDisplayActivity)getActivity()).pushPath(dirname);
    populateFileList();
    resetFileFragment();
    return;
  }
  Intent showDetailsIntent=new Intent(getActivity(),FileDetailActivity.class);
  showDetailsIntent.putExtra(FileDetailFragment.FILE,file);
  showDetailsIntent.putExtra(FileDownloader.EXTRA_ACCOUNT,mAccount);
  FileDetailFragment fd=(FileDetailFragment)getFragmentManager().findFragmentByTag("FileDetails");
  if (fd == null) {
    fd=(FileDetailFragment)getFragmentManager().findFragmentById(R.id.fileDetail);
  }
  if (fd != null) {
    if (fd.isEmptyLayout()) {
      FragmentTransaction transaction=getFragmentManager().beginTransaction();
      fd=new FileDetailFragment(showDetailsIntent);
      transaction.replace(R.id.fileDetail,fd,"FileDetails");
      transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
      transaction.commit();
    }
 else {
      fd.updateFileDetails(showDetailsIntent);
    }
  }
 else {
    startActivity(showDetailsIntent);
  }
}
