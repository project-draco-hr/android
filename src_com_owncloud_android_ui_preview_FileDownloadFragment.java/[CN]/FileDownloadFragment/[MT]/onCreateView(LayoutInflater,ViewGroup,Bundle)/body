{
  super.onCreateView(inflater,container,savedInstanceState);
  if (savedInstanceState != null) {
    if (!mIgnoreFirstSavedState) {
      setFile((OCFile)savedInstanceState.getParcelable(FileDownloadFragment.EXTRA_FILE));
      mAccount=savedInstanceState.getParcelable(FileDownloadFragment.EXTRA_ACCOUNT);
      mError=savedInstanceState.getBoolean(FileDownloadFragment.EXTRA_ERROR);
    }
 else {
      mIgnoreFirstSavedState=false;
    }
  }
  mView=inflater.inflate(R.layout.file_download_fragment,container,false);
  ProgressBar progressBar=(ProgressBar)mView.findViewById(R.id.progressBar);
  DisplayUtils.colorPreLollipopHorizontalProgressBar(progressBar);
  mProgressListener=new ProgressListener(progressBar);
  (mView.findViewById(R.id.cancelBtn)).setOnClickListener(this);
  (mView.findViewById(R.id.fileDownloadLL)).setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      ((PreviewImageActivity)getActivity()).toggleFullScreen();
    }
  }
);
  if (mError) {
    setButtonsForRemote();
  }
 else {
    setButtonsForTransferring();
  }
  return mView;
}
