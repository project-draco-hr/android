{
  int status=-1;
  boolean savedFile=false;
  mGet=new GetMethod(client.getBaseUri() + WebdavUtils.encodePath(mFile.getRemotePath()));
  Iterator<OnDatatransferProgressListener> it=null;
  FileOutputStream fos=null;
  try {
    status=client.executeMethod(mGet);
    if (isSuccess(status)) {
      targetFile.createNewFile();
      BufferedInputStream bis=new BufferedInputStream(mGet.getResponseBodyAsStream());
      fos=new FileOutputStream(targetFile);
      long transferred=0;
      byte[] bytes=new byte[4096];
      int readResult=0;
      while ((readResult=bis.read(bytes)) != -1) {
synchronized (mCancellationRequested) {
          if (mCancellationRequested.get()) {
            mGet.abort();
            throw new OperationCancelledException();
          }
        }
        fos.write(bytes,0,readResult);
        transferred+=readResult;
synchronized (mDataTransferListeners) {
          it=mDataTransferListeners.iterator();
          while (it.hasNext()) {
            it.next().onTransferProgress(readResult,transferred,mFile.getFileLength(),targetFile.getName());
          }
        }
      }
      savedFile=true;
      Header modificationTime=mGet.getResponseHeader("Last-Modified");
      if (modificationTime != null) {
        Date d=WebdavUtils.parseResponseDate((String)modificationTime.getValue());
        mModificationTimestamp=(d != null) ? d.getTime() : 0;
      }
    }
 else {
      client.exhaustResponse(mGet.getResponseBodyAsStream());
    }
  }
  finally {
    if (fos != null)     fos.close();
    if (!savedFile && targetFile.exists()) {
      targetFile.delete();
    }
    mGet.releaseConnection();
  }
  return status;
}
