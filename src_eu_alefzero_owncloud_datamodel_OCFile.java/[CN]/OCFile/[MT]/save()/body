{
  ContentValues cv=new ContentValues();
  cv.put(ProviderTableMeta.FILE_MODIFIED,modifiedTimestamp);
  cv.put(ProviderTableMeta.FILE_CREATION,creationTimestamp);
  cv.put(ProviderTableMeta.FILE_CONTENT_LENGTH,length);
  cv.put(ProviderTableMeta.FILE_CONTENT_TYPE,mimeType);
  cv.put(ProviderTableMeta.FILE_NAME,getFileName());
  if (parentId != 0)   cv.put(ProviderTableMeta.FILE_PARENT,parentId);
  cv.put(ProviderTableMeta.FILE_PATH,remotePath);
  cv.put(ProviderTableMeta.FILE_STORAGE_PATH,localStoragePath);
  cv.put(ProviderTableMeta.FILE_ACCOUNT_OWNER,account.name);
  if (fileExists()) {
    if (providerClient != null) {
      try {
        providerClient.update(ProviderTableMeta.CONTENT_URI,cv,ProviderTableMeta._ID + "=?",new String[]{String.valueOf(id)});
      }
 catch (      RemoteException e) {
        Log.e(TAG,e.getMessage());
        return;
      }
    }
 else {
      contentResolver.update(ProviderTableMeta.CONTENT_URI,cv,ProviderTableMeta._ID + "=?",new String[]{String.valueOf(id)});
    }
  }
 else {
    Uri new_entry=null;
    if (providerClient != null) {
      try {
        new_entry=providerClient.insert(ProviderTableMeta.CONTENT_URI_FILE,cv);
      }
 catch (      RemoteException e) {
        Log.e(TAG,e.getMessage());
        id=-1;
        return;
      }
    }
 else {
      new_entry=contentResolver.insert(ProviderTableMeta.CONTENT_URI_FILE,cv);
    }
    try {
      String p=new_entry.getEncodedPath();
      id=Integer.parseInt(p.substring(p.lastIndexOf('/') + 1));
    }
 catch (    NumberFormatException e) {
      Log.e(TAG,"Can't retrieve file id from uri: " + new_entry.toString() + ", reason: "+ e.getMessage());
      id=-1;
    }
  }
}
