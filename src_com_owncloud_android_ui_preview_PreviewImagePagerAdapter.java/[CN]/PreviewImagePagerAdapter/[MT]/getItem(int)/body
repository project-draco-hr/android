{
  OCFile file=mImageFiles.get(i);
  Fragment fragment;
  if (file.isDown()) {
    fragment=PreviewImageFragment.newInstance(file,mAccount,mObsoletePositions.contains(Integer.valueOf(i)));
  }
 else   if (mDownloadErrors.contains(Integer.valueOf(i))) {
    fragment=FileDownloadFragment.newInstance(file,mAccount,true);
    ((FileDownloadFragment)fragment).setError(true);
    mDownloadErrors.remove(Integer.valueOf(i));
  }
 else {
    fragment=FileDownloadFragment.newInstance(file,mAccount,mObsoletePositions.contains(Integer.valueOf(i)));
  }
  mObsoletePositions.remove(Integer.valueOf(i));
  return fragment;
}
