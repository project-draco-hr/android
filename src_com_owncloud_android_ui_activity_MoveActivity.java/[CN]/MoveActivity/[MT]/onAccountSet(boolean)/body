{
  super.onAccountSet(stateWasRecovered);
  if (getAccount() != null) {
    updateFileFromDB();
    OCFile folder=getFile();
    if (folder == null || !folder.isFolder()) {
      setFile(getStorageManager().getFileByPath(OCFile.ROOT_PATH));
      folder=getFile();
    }
    if (!stateWasRecovered) {
      OCFileListFragment listOfFolders=getListOfFilesFragment();
      listOfFolders.listDirectory(folder);
      startSyncFolderOperation(folder);
    }
    updateNavigationElementsInActionBar();
  }
}
