{
  boolean retval=true;
switch (item.getItemId()) {
case R.id.action_create_dir:
{
      CreateFolderDialogFragment dialog=CreateFolderDialogFragment.newInstance(getCurrentDir());
      dialog.show(getSupportFragmentManager(),"createdirdialog");
      break;
    }
case R.id.action_upload:
{
    showDialog(DIALOG_CHOOSE_UPLOAD_SOURCE);
    break;
  }
case android.R.id.home:
{
  if (mDrawerLayout.isDrawerOpen(GravityCompat.START)) {
    mDrawerLayout.closeDrawer(GravityCompat.START);
  }
 else {
    mDrawerLayout.openDrawer(GravityCompat.START);
  }
  break;
}
case R.id.action_sort:
{
SharedPreferences appPreferences=PreferenceManager.getDefaultSharedPreferences(this);
Integer sortOrder=appPreferences.getInt("sortOrder",FileListListAdapter.SORT_NAME);
AlertDialog.Builder builder=new AlertDialog.Builder(this);
builder.setTitle(R.string.actionbar_sort_title).setSingleChoiceItems(R.array.actionbar_sortby,sortOrder,new DialogInterface.OnClickListener(){
  public void onClick(  DialogInterface dialog,  int which){
switch (which) {
case 0:
      sortByName(true);
    break;
case 1:
  sortByDate(false);
break;
}
dialog.dismiss();
}
}
);
builder.create().show();
break;
}
default :
retval=super.onOptionsItemSelected(item);
}
return retval;
}
