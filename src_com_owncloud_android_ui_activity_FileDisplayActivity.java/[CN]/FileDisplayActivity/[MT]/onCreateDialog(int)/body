{
  Dialog dialog=null;
  AlertDialog.Builder builder;
switch (id) {
case DIALOG_SHORT_WAIT:
{
      ProgressDialog working_dialog=new ProgressDialog(this);
      working_dialog.setMessage(getResources().getString(R.string.wait_a_moment));
      working_dialog.setIndeterminate(true);
      working_dialog.setCancelable(false);
      dialog=working_dialog;
      break;
    }
case DIALOG_CHOOSE_UPLOAD_SOURCE:
{
    String[] items=null;
    String[] allTheItems={getString(R.string.actionbar_upload_files),getString(R.string.actionbar_upload_from_apps),getString(R.string.actionbar_failed_instant_upload)};
    String[] commonItems={getString(R.string.actionbar_upload_files),getString(R.string.actionbar_upload_from_apps)};
    if (InstantUploadActivity.IS_ENABLED)     items=allTheItems;
 else     items=commonItems;
    builder=new AlertDialog.Builder(this);
    builder.setTitle(R.string.actionbar_upload);
    builder.setItems(items,new DialogInterface.OnClickListener(){
      public void onClick(      DialogInterface dialog,      int item){
        if (item == 0) {
          Intent action=new Intent(FileDisplayActivity.this,UploadFilesActivity.class);
          action.putExtra(UploadFilesActivity.EXTRA_ACCOUNT,FileDisplayActivity.this.getAccount());
          startActivityForResult(action,ACTION_SELECT_MULTIPLE_FILES);
        }
 else         if (item == 1) {
          Intent action=new Intent(Intent.ACTION_GET_CONTENT);
          action=action.setType("*/*").addCategory(Intent.CATEGORY_OPENABLE);
          startActivityForResult(Intent.createChooser(action,getString(R.string.upload_chooser_title)),ACTION_SELECT_CONTENT_FROM_APPS);
        }
 else         if (item == 2 && InstantUploadActivity.IS_ENABLED) {
          Intent action=new Intent(FileDisplayActivity.this,InstantUploadActivity.class);
          action.putExtra(FileUploader.KEY_ACCOUNT,FileDisplayActivity.this.getAccount());
          startActivity(action);
        }
      }
    }
);
    dialog=builder.create();
    break;
  }
case DIALOG_SSL_VALIDATOR:
{
  dialog=SslValidatorDialog.newInstance(this,mLastSslUntrustedServerResult,this);
  break;
}
case DIALOG_CERT_NOT_SAVED:
{
builder=new AlertDialog.Builder(this);
builder.setMessage(getResources().getString(R.string.ssl_validator_not_saved));
builder.setCancelable(false);
builder.setPositiveButton(R.string.common_ok,new DialogInterface.OnClickListener(){
  @Override public void onClick(  DialogInterface dialog,  int which){
    dialog.dismiss();
  }
}
);
dialog=builder.create();
break;
}
default :
dialog=null;
}
return dialog;
}
