{
  if (mDualPane && getSupportFragmentManager().findFragmentByTag(FileDetailFragment.FTAG) == null) {
    FragmentTransaction transaction=getSupportFragmentManager().beginTransaction();
    if (mChosenFile != null) {
      if (PreviewMediaFragment.canBePreviewed(mChosenFile)) {
        if (mChosenFile.isDown()) {
          int startPlaybackPosition=getIntent().getIntExtra(PreviewVideoActivity.EXTRA_START_POSITION,0);
          boolean autoplay=getIntent().getBooleanExtra(PreviewVideoActivity.EXTRA_AUTOPLAY,true);
          transaction.replace(R.id.file_details_container,new PreviewMediaFragment(mChosenFile,getAccount(),startPlaybackPosition,autoplay),FileDetailFragment.FTAG);
        }
 else {
          transaction.replace(R.id.file_details_container,new FileDetailFragment(mChosenFile,getAccount()),FileDetailFragment.FTAG);
          mWaitingToPreview=mChosenFile;
        }
      }
 else {
        transaction.replace(R.id.file_details_container,new FileDetailFragment(mChosenFile,getAccount()),FileDetailFragment.FTAG);
      }
      mChosenFile=null;
    }
 else {
      transaction.replace(R.id.file_details_container,new FileDetailFragment(null,null),FileDetailFragment.FTAG);
    }
    transaction.commit();
  }
}
