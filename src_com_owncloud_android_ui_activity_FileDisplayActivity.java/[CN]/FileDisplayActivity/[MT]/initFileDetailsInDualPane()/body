{
  if (mDualPane && getSupportFragmentManager().findFragmentByTag(FileDetailFragment.FTAG) == null) {
    FragmentTransaction transaction=getSupportFragmentManager().beginTransaction();
    if (mCurrentFile != null) {
      if (PreviewMediaFragment.canBePreviewed(mCurrentFile)) {
        if (mCurrentFile.isDown()) {
          transaction.replace(R.id.file_details_container,new PreviewMediaFragment(mCurrentFile,AccountUtils.getCurrentOwnCloudAccount(this)),FileDetailFragment.FTAG);
        }
 else {
          transaction.replace(R.id.file_details_container,new FileDetailFragment(mCurrentFile,AccountUtils.getCurrentOwnCloudAccount(this)),FileDetailFragment.FTAG);
          mWaitingToPreview=mCurrentFile;
        }
      }
 else {
        transaction.replace(R.id.file_details_container,new FileDetailFragment(mCurrentFile,AccountUtils.getCurrentOwnCloudAccount(this)),FileDetailFragment.FTAG);
      }
      mCurrentFile=null;
    }
 else {
      transaction.replace(R.id.file_details_container,new FileDetailFragment(null,null),FileDetailFragment.FTAG);
    }
    transaction.commit();
  }
}
