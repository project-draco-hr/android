{
  if (file != null) {
    if (PreviewImageFragment.canBePreviewed(file)) {
      startPreviewImage(file);
    }
 else     if (PreviewMediaFragment.canBePreviewed(file)) {
      if (file.isDown()) {
        if (!onOrientationChange) {
          startMediaPreview(file,0,true,onOrientationChange);
        }
 else {
          int startPlaybackPosition=0;
          boolean autoplay=true;
          Fragment fragment=getSupportFragmentManager().findFragmentByTag(FileDetailFragment.FTAG);
          if (fragment != null && file.isVideo()) {
            PreviewMediaFragment videoFragment=(PreviewMediaFragment)fragment;
            startPlaybackPosition=videoFragment.getPosition();
            autoplay=videoFragment.isPlaying();
          }
          startMediaPreview(file,startPlaybackPosition,autoplay,onOrientationChange);
        }
      }
 else {
        startDownloadForPreview(file,onOrientationChange);
      }
    }
 else     if (file.isDown() && !onOrientationChange) {
      openFile(file);
    }
 else {
      startDownloadForPreview(file,onOrientationChange);
    }
  }
}
