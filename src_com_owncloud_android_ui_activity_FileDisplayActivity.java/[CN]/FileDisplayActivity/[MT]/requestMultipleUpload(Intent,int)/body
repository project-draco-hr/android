{
  String[] filePaths=data.getStringArrayExtra(UploadFilesActivity.EXTRA_CHOSEN_FILES);
  if (filePaths != null) {
    String[] remotePaths=new String[filePaths.length];
    String remotePathBase="";
    for (int j=mDirectories.getCount() - 2; j >= 0; --j) {
      remotePathBase+=OCFile.PATH_SEPARATOR + mDirectories.getItem(j);
    }
    if (!remotePathBase.endsWith(OCFile.PATH_SEPARATOR))     remotePathBase+=OCFile.PATH_SEPARATOR;
    for (int j=0; j < remotePaths.length; j++) {
      remotePaths[j]=remotePathBase + (new File(filePaths[j])).getName();
    }
    Intent i=new Intent(this,FileUploadService.class);
    i.putExtra(FileUploadService.KEY_ACCOUNT,getAccount());
    i.putExtra(FileUploadService.KEY_LOCAL_FILE,filePaths);
    i.putExtra(FileUploadService.KEY_REMOTE_FILE,remotePaths);
    i.putExtra(FileUploadService.KEY_UPLOAD_TYPE,FileUploadService.UPLOAD_MULTIPLE_FILES);
    if (resultCode == UploadFilesActivity.RESULT_OK_AND_MOVE)     i.putExtra(FileUploadService.KEY_LOCAL_BEHAVIOUR,FileUploadService.LocalBehaviour.LOCAL_BEHAVIOUR_MOVE);
    startService(i);
  }
 else {
    Log_OC.d(TAG,"User clicked on 'Update' with no selection");
    Toast t=Toast.makeText(this,getString(R.string.filedisplay_no_file_selected),Toast.LENGTH_LONG);
    t.show();
    return;
  }
}
