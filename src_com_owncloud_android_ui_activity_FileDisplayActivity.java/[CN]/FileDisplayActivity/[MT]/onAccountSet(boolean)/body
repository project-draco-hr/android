{
  if (getAccount() != null) {
    mStorageManager=new FileDataStorageManager(getAccount(),getContentResolver());
    OCFile file=getFile();
    String parentPath="";
    if (file != null) {
      if (file.isDown() && file.getLastSyncDateForProperties() == 0) {
        parentPath=file.getRemotePath().substring(0,file.getRemotePath().lastIndexOf(file.getFileName()));
        if (mStorageManager.getFileByPath(parentPath) == null)         file=null;
      }
 else {
        file=mStorageManager.getFileByPath(file.getRemotePath());
      }
    }
    if (file == null) {
      file=mStorageManager.getFileByPath(OCFile.ROOT_PATH);
    }
    setFile(file);
    setNavigationListWithFolder(file);
    if (isSharedSupported()) {
      startGetSharedFiles();
    }
    if (!stateWasRecovered) {
      Log_OC.e(TAG,"Initializing Fragments in onAccountChanged..");
      initFragmentsWithFile();
      if (file.isFolder()) {
        startSyncFolderOperation(file);
      }
    }
 else {
      updateFragmentsVisibility(!file.isFolder());
      updateNavigationElementsInActionBar(file.isFolder() ? null : file);
    }
  }
 else {
    Log_OC.wtf(TAG,"onAccountChanged was called with NULL account associated!");
  }
}
