{
  dismissLoadingDialog();
  OCFile renamedFile=operation.getFile();
  if (result.isSuccess()) {
    FileFragment details=getSecondFragment();
    if (details != null)     if (details instanceof FileDetailFragment && renamedFile.equals(details.getFile())) {
      ((FileDetailFragment)details).updateFileDetails(renamedFile,getAccount());
      showDetails(renamedFile);
    }
 else     if (details instanceof PreviewMediaFragment && renamedFile.equals(details.getFile())) {
      ((PreviewMediaFragment)details).updateFile(renamedFile);
      if (PreviewMediaFragment.canBePreviewed(renamedFile)) {
        int position=((PreviewMediaFragment)details).getPosition();
        startMediaPreview(renamedFile,position,true);
      }
 else {
        getFileOperationsHelper().openFile(renamedFile);
      }
    }
    if (getStorageManager().getFileById(renamedFile.getParentId()).equals(getCurrentDir())) {
      refreshListOfFilesFragment();
    }
  }
 else {
    if (result.getCode().equals(ResultCode.INVALID_LOCAL_FILE_NAME)) {
      Toast msg=Toast.makeText(this,R.string.rename_local_fail_msg,Toast.LENGTH_LONG);
      msg.show();
    }
    if (result.getCode().equals(ResultCode.INVALID_CHARACTER_IN_NAME)) {
      Toast msg=Toast.makeText(this,R.string.filename_forbidden_characters,Toast.LENGTH_LONG);
      msg.show();
    }
 else {
      Toast msg=Toast.makeText(this,R.string.rename_server_fail_msg,Toast.LENGTH_LONG);
      msg.show();
      if (result.isSslRecoverableException()) {
        mLastSslUntrustedServerResult=result;
        showUntrustedCertDialog(mLastSslUntrustedServerResult);
      }
    }
  }
}
