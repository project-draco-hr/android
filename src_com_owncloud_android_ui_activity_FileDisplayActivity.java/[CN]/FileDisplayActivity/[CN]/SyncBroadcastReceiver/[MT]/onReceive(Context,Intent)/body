{
  boolean inProgress=intent.getBooleanExtra(FileSyncService.IN_PROGRESS,false);
  String accountName=intent.getStringExtra(FileSyncService.ACCOUNT_NAME);
  RemoteOperationResult synchResult=(RemoteOperationResult)intent.getSerializableExtra(FileSyncService.SYNC_RESULT);
  Log_OC.d(TAG,"sync of account " + accountName + " is in_progress: "+ inProgress);
  if (getAccount() != null && accountName.equals(getAccount().name)) {
    String synchFolderRemotePath=intent.getStringExtra(FileSyncService.SYNC_FOLDER_REMOTE_PATH);
    OCFile currentFile=(getFile() == null) ? null : mStorageManager.getFileByPath(getFile().getRemotePath());
    OCFile currentDir=(getCurrentDir() == null) ? null : mStorageManager.getFileByPath(getCurrentDir().getRemotePath());
    if (currentDir == null) {
      Toast.makeText(FileDisplayActivity.this,getString(R.string.sync_current_folder_was_removed),Toast.LENGTH_LONG).show();
      onBackPressed();
    }
 else {
      if (currentFile == null && !getFile().isDirectory()) {
        cleanSecondFragment();
        currentFile=currentDir;
      }
      if (synchFolderRemotePath != null && currentDir.getRemotePath().equals(synchFolderRemotePath)) {
        OCFileListFragment fileListFragment=getListOfFilesFragment();
        if (fileListFragment != null) {
          fileListFragment.listDirectory(currentDir);
        }
      }
      setFile(currentFile);
    }
    setSupportProgressBarIndeterminateVisibility(inProgress);
    removeStickyBroadcast(intent);
    mSyncInProgress=inProgress;
  }
  if (synchResult != null) {
    if (synchResult.getCode().equals(RemoteOperationResult.ResultCode.SSL_RECOVERABLE_PEER_UNVERIFIED)) {
      mLastSslUntrustedServerResult=synchResult;
      showDialog(DIALOG_SSL_VALIDATOR);
    }
  }
}
