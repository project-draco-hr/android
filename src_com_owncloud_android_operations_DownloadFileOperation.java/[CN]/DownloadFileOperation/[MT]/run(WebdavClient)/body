{
  RemoteOperationResult result=null;
  File newFile=null;
  boolean moved=false;
  File tmpFile=new File(getTmpPath());
  try {
    tmpFile.getParentFile().mkdirs();
    int status=downloadFile(client,tmpFile);
    if (isSuccess(status)) {
      newFile=new File(getSavePath());
      newFile.getParentFile().mkdirs();
      moved=tmpFile.renameTo(newFile);
    }
    if (!moved)     result=new RemoteOperationResult(RemoteOperationResult.ResultCode.STORAGE_ERROR_MOVING_FROM_TMP);
 else     result=new RemoteOperationResult(isSuccess(status),status);
    Log.i(TAG,"Download of " + mFile.getRemotePath() + " to "+ getSavePath()+ ": "+ result.getLogMessage());
  }
 catch (  Exception e) {
    result=new RemoteOperationResult(e);
    Log.e(TAG,"Download of " + mFile.getRemotePath() + " to "+ getSavePath()+ ": "+ result.getLogMessage(),e);
  }
  return result;
}
