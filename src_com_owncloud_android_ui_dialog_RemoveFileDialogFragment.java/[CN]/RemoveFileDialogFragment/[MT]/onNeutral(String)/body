{
  ComponentsGetter cg=(ComponentsGetter)getActivity();
  cg.getFileOperationsHelper().removeFile(mTargetFile,true);
  FileDataStorageManager storageManager=cg.getStorageManager();
  boolean containsFavorite=false;
  if (mTargetFile.isFolder()) {
    Vector<OCFile> files=storageManager.getFolderContent(mTargetFile);
    for (    OCFile file : files) {
      containsFavorite=file.isFavorite() || containsFavorite;
      if (containsFavorite)       break;
    }
  }
  if (mTargetFile.isFavorite() || containsFavorite) {
    OCFile folder=null;
    if (mTargetFile.isFolder()) {
      folder=mTargetFile;
    }
 else {
      folder=storageManager.getFileById(mTargetFile.getParentId());
    }
    folder.setEtag("");
    storageManager.saveFile(folder);
  }
}
