{
  super.onActivityCreated(savedInstanceState);
  mStorageManager=new FileDataStorageManager(mAccount,getActivity().getApplicationContext().getContentResolver());
  if (savedInstanceState != null) {
    mFile=savedInstanceState.getParcelable(PreviewImageFragment.EXTRA_FILE);
    mAccount=savedInstanceState.getParcelable(PreviewImageFragment.EXTRA_ACCOUNT);
  }
  if (mFile == null) {
    throw new IllegalStateException("Instanced with a NULL OCFile");
  }
  if (mAccount == null) {
    throw new IllegalStateException("Instanced with a NULL ownCloud Account");
  }
  if (!mFile.isDown()) {
    throw new IllegalStateException("There is no local file to preview");
  }
}
