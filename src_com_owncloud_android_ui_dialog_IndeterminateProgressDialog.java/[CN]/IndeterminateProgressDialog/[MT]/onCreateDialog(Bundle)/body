{
  final ProgressDialog dialog=new ProgressDialog(getActivity(),R.style.ProgressDialogTheme);
  dialog.setIndeterminate(true);
  int messageId=getArguments().getInt(ARG_MESSAGE_ID,R.string.placeholder_sentence);
  dialog.setMessage(getString(messageId));
  boolean cancelable=getArguments().getBoolean(ARG_CANCELABLE,false);
  if (!cancelable) {
    dialog.setCancelable(false);
    OnKeyListener keyListener=new OnKeyListener(){
      @Override public boolean onKey(      DialogInterface dialog,      int keyCode,      KeyEvent event){
        if (keyCode == KeyEvent.KEYCODE_BACK) {
          return true;
        }
        return false;
      }
    }
;
    dialog.setOnKeyListener(keyListener);
  }
  return dialog;
}
