{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.video_layout);
  mFile=getIntent().getExtras().getParcelable(EXTRA_FILE);
  mAccount=getIntent().getExtras().getParcelable(EXTRA_ACCOUNT);
  mVideoPlayer=(VideoView)findViewById(R.id.videoPlayer);
  mVideoPlayer.setOnPreparedListener(this);
  mVideoPlayer.setOnCompletionListener(this);
  mVideoPlayer.setOnErrorListener(this);
  mVideoPlayer.setKeepScreenOn(true);
  if (mFile != null) {
    if (mFile.isDown()) {
      mVideoPlayer.setVideoPath(mFile.getStoragePath());
    }
 else     if (mAccount != null) {
      String url=AccountUtils.constructFullURLForAccount(this,mAccount) + mFile.getRemotePath();
      mVideoPlayer.setVideoURI(Uri.parse(url));
    }
 else {
      onError(null,OC_MEDIA_ERROR,R.string.media_err_no_account);
    }
    mMediaController=new MediaController(this);
    mMediaController.setMediaPlayer(mVideoPlayer);
    mMediaController.setAnchorView(mVideoPlayer);
    mVideoPlayer.setMediaController(mMediaController);
  }
 else {
    onError(null,OC_MEDIA_ERROR,R.string.media_err_nothing_to_play);
  }
}
