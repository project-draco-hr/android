{
  boolean downloading=false;
  boolean uploading=false;
  if (mComponentsGetter != null && mFile != null && mAccount != null) {
    FileDownloaderBinder downloaderBinder=mComponentsGetter.getFileDownloaderBinder();
    downloading=downloaderBinder != null && downloaderBinder.isDownloading(mAccount,mFile);
    FileUploaderBinder uploaderBinder=mComponentsGetter.getFileUploaderBinder();
    uploading=uploaderBinder != null && uploaderBinder.isUploading(mAccount,mFile);
  }
  if (mFile == null || mFile.isDown() || downloading || uploading) {
    toHide.add(R.id.action_download_file);
  }
 else {
    toShow.add(R.id.action_download_file);
  }
  if (mFile == null || downloading || uploading) {
    toHide.add(R.id.action_rename_file);
  }
 else {
    toShow.add(R.id.action_rename_file);
  }
  if (mFile == null || downloading || uploading) {
    toHide.add(R.id.action_move);
  }
 else {
    toShow.add(R.id.action_move);
  }
  if (mFile == null || downloading || uploading) {
    toHide.add(R.id.action_remove_file);
  }
 else {
    toShow.add(R.id.action_remove_file);
  }
  if (mFile == null || mFile.isFolder() || !mFile.isDown() || downloading || uploading) {
    toHide.add(R.id.action_open_file_with);
  }
 else {
    toShow.add(R.id.action_open_file_with);
  }
  if (mFile == null || !downloading) {
    toHide.add(R.id.action_cancel_download);
  }
 else {
    toShow.add(R.id.action_cancel_download);
  }
  if (mFile == null || !uploading || mFile.isFolder()) {
    toHide.add(R.id.action_cancel_upload);
  }
 else {
    toShow.add(R.id.action_cancel_upload);
  }
  if (mFile == null || mFile.isFolder() || !mFile.isDown() || downloading || uploading) {
    toHide.add(R.id.action_sync_file);
  }
 else {
    toShow.add(R.id.action_sync_file);
  }
  if (mFile == null) {
    toHide.add(R.id.action_share_file);
  }
 else {
    toShow.add(R.id.action_share_file);
  }
  if (mFile == null || !mFile.isShareByLink()) {
    toHide.add(R.id.action_unshare_file);
  }
 else {
    toShow.add(R.id.action_unshare_file);
  }
  if (mFile == null || mFile.isFolder()) {
    toHide.add(R.id.action_see_details);
  }
 else {
    toShow.add(R.id.action_see_details);
  }
  boolean sendAllowed=(mContext != null && mContext.getString(R.string.send_files_to_other_apps).equalsIgnoreCase("on"));
  if (mFile == null || !sendAllowed || mFile.isFolder() || uploading || downloading) {
    toHide.add(R.id.action_send_file);
  }
 else {
    toShow.add(R.id.action_send_file);
  }
}
