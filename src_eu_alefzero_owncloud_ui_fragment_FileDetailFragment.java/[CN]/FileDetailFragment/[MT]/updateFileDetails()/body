{
  mFile=mIntent.getParcelableExtra(EXTRA_FILE);
  Button downloadButton=(Button)getView().findViewById(R.id.fdDownloadBtn);
  if (mFile != null) {
    setFilename(mFile.getFileName());
    setFiletype(DisplayUtils.convertMIMEtoPrettyPrint(mFile.getMimetype()));
    setFilesize(mFile.getFileLength());
    setTimeCreated(mFile.getCreationTimestamp());
    setTimeModified(mFile.getModificationTimestamp());
    if (mFile.getStoragePath() != null) {
      try {
        if (mFile.getMimetype().startsWith("image/")) {
          ImageView preview=(ImageView)getView().findViewById(R.id.fdPreview);
          Bitmap bmp=BitmapFactory.decodeFile(mFile.getStoragePath());
          preview.setImageBitmap(bmp);
        }
      }
 catch (      OutOfMemoryError e) {
        Log.e(TAG,"Out of memory occured for file with size " + mFile.getFileLength());
      }
      downloadButton.setText(R.string.filedetails_open);
      downloadButton.setOnClickListener(new OnClickListener(){
        @Override public void onClick(        View v){
          Intent i=new Intent(Intent.ACTION_VIEW);
          i.setDataAndType(Uri.parse("file://" + mFile.getStoragePath()),mFile.getMimetype());
          startActivity(i);
        }
      }
);
    }
 else {
      downloadButton.setOnClickListener(this);
    }
  }
}
