{
  final long percentage=(totalToTransfer > 0 ? totalTransferredSoFar * 100 / totalToTransfer : 0);
  final boolean upload=fileName.contains(getString(R.string.upload_folder_path));
  Log.d(LOG_TAG,"progressRate " + percentage);
  mHandler.post(new Runnable(){
    @Override public void run(){
      TextView progressView=null;
      if (upload) {
        progressView=(TextView)findViewById(R.id.upload_progress);
      }
 else {
        progressView=(TextView)findViewById(R.id.download_progress);
      }
      if (progressView != null) {
        progressView.setText(Long.toString(percentage) + "%");
      }
    }
  }
);
}
