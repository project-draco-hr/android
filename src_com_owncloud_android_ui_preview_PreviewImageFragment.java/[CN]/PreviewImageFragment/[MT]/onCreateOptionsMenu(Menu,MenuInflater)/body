{
  super.onCreateOptionsMenu(menu,inflater);
  inflater.inflate(R.menu.file_actions_menu,menu);
  List<Integer> toHide=new ArrayList<Integer>();
  MenuItem item=null;
  toHide.add(R.id.action_cancel_download);
  toHide.add(R.id.action_cancel_upload);
  toHide.add(R.id.action_download_file);
  toHide.add(R.id.action_rename_file);
  if (!getFile().isShareByLink()) {
    toHide.add(R.id.action_unshare_file);
  }
  boolean sendEnabled=getString(R.string.send_files_to_other_apps).equalsIgnoreCase("on");
  if (!sendEnabled) {
    toHide.add(R.id.action_send_file);
  }
  for (  int i : toHide) {
    item=menu.findItem(i);
    if (item != null) {
      item.setVisible(false);
      item.setEnabled(false);
    }
  }
}
