{
  super.onActivityCreated(savedInstanceState);
  if (savedInstanceState != null) {
    if (!mIgnoreFirstSavedState) {
      OCFile file=(OCFile)savedInstanceState.getParcelable(PreviewImageFragment.EXTRA_FILE);
      mAccount=savedInstanceState.getParcelable(PreviewImageFragment.EXTRA_ACCOUNT);
      if (mAccount != null) {
        OCFile updatedFile=((FileActivity)getSherlockActivity()).getStorageManager().getFileByPath(file.getRemotePath());
        if (updatedFile != null) {
          setFile(updatedFile);
        }
 else {
          setFile(file);
        }
      }
 else {
        setFile(file);
      }
    }
 else {
      mIgnoreFirstSavedState=false;
    }
  }
  if (getFile() == null) {
    throw new IllegalStateException("Instanced with a NULL OCFile");
  }
  if (mAccount == null) {
    throw new IllegalStateException("Instanced with a NULL ownCloud Account");
  }
  if (!getFile().isDown()) {
    throw new IllegalStateException("There is no local file to preview");
  }
}
