{
  RemoteOperationResult result=null;
  String path=mRemotePath;
  if (path.endsWith(FileUtils.PATH_SEPARATOR)) {
    path=path.substring(0,path.length() - 1);
  }
  OCShare share=getStorageManager().getShareByPath(path);
  if (share != null) {
    RemoveRemoteShareOperation operation=new RemoveRemoteShareOperation((int)share.getIdRemoteShared());
    result=operation.execute(client);
    if (result.isSuccess() || result.getCode() == ResultCode.SHARE_NOT_FOUND) {
      Log_OC.d(TAG,"Share id = " + share.getIdRemoteShared() + " deleted");
      OCFile file=getStorageManager().getFileByPath(mRemotePath);
      file.setShareByLink(false);
      file.setPublicLink("");
      getStorageManager().saveFile(file);
      getStorageManager().removeShare(share);
      if (result.getCode() == ResultCode.SHARE_NOT_FOUND) {
        if (existsFile(client,file.getRemotePath())) {
          result=new RemoteOperationResult(ResultCode.OK);
        }
 else {
          getStorageManager().removeFile(file,true,true);
        }
      }
    }
  }
 else {
    result=new RemoteOperationResult(ResultCode.SHARE_NOT_FOUND);
  }
  return result;
}
