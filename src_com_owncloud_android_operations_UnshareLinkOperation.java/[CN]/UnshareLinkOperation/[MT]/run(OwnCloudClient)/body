{
  RemoteOperationResult result=null;
  String path=mFile.getRemotePath();
  if (mFile.isFolder()) {
    path=path.substring(0,path.length() - 1);
  }
  OCShare share=getStorageManager().getShareByPath(path);
  if (share != null) {
    RemoveRemoteShareOperation operation=new RemoveRemoteShareOperation((int)share.getIdRemoteShared());
    result=operation.execute(client);
    if (result.isSuccess() || result.getCode() == ResultCode.SHARE_NOT_FOUND) {
      Log_OC.d(TAG,"Share id = " + share.getIdRemoteShared() + " deleted");
      mFile.setShareByLink(false);
      mFile.setPublicLink("");
      getStorageManager().saveFile(mFile);
      getStorageManager().removeShare(share);
      if (result.getCode() == ResultCode.SHARE_NOT_FOUND) {
        if (existsFile(client,mFile.getRemotePath())) {
          result=new RemoteOperationResult(ResultCode.OK);
        }
 else {
          getStorageManager().removeFile(mFile,true,true);
        }
      }
    }
  }
 else {
    result=new RemoteOperationResult(ResultCode.SHARE_NOT_FOUND);
  }
  return result;
}
