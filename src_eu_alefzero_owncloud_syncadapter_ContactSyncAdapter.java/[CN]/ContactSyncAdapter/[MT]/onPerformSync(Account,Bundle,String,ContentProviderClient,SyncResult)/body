{
  this.setAccount(account);
  this.setContentProvider(provider);
  Cursor cursor=getContacts();
  if (cursor != null && cursor.getCount() > 0) {
    while (cursor.moveToNext()) {
      String id=cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
      String lookup=cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
      try {
        FileInputStream fis=getContactVcard(lookup);
        HttpPut query=new HttpPut(getUri() + "/addressbooks/" + getAccount().name.split("@")[0]+ "/default/"+ lookup+ ".vcf");
        byte[] b=new byte[fis.available()];
        fis.read(b);
        query.setEntity(new ByteArrayEntity(b));
        HttpResponse response=fireRawRequest(query);
        if (201 != response.getStatusLine().getStatusCode()) {
          syncResult.stats.numIoExceptions++;
        }
        fis.close();
      }
 catch (      IOException e) {
        syncResult.stats.numIoExceptions++;
      }
catch (      OperationCanceledException e) {
        return;
      }
catch (      AuthenticatorException e) {
        syncResult.stats.numAuthExceptions++;
      }
    }
  }
}
