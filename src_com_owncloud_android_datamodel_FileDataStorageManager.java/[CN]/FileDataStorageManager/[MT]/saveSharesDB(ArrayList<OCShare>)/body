{
  if (shares.size() > 0) {
    saveShares(shares);
    ArrayList<OCFile> sharedFiles=new ArrayList<OCFile>();
    for (    OCShare share : shares) {
      String path=share.getPath();
      if (share.isDirectory()) {
        path=path + FileUtils.PATH_SEPARATOR;
      }
      OCFile file=getFileByPath(path);
      if (file != null) {
        if (share.getShareType().equals(ShareType.PUBLIC_LINK)) {
          file.setShareByLink(true);
          sharedFiles.add(file);
        }
      }
    }
    if (sharedFiles.size() > 0) {
      updateSharedFiles(sharedFiles);
    }
  }
}
