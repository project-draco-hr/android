{
  share.setPath(mPath);
  if (mPath.endsWith(FileUtils.PATH_SEPARATOR)) {
    share.setIsFolder(true);
  }
 else {
    share.setIsFolder(false);
  }
  share.setPermissions(mPermissions);
  getStorageManager().saveShare(share);
  OCFile file=getStorageManager().getFileByPath(mPath);
  if (file != null) {
    mSendIntent.putExtra(Intent.EXTRA_TEXT,share.getShareLink());
    mSendIntent.putExtra(Intent.EXTRA_SUBJECT,String.format(mContext.getString(R.string.subject_token),getClient().getCredentials().getUsername(),file.getFileName()));
    file.setPublicLink(share.getShareLink());
    file.setShareByLink(true);
    getStorageManager().saveFile(file);
    Log_OC.d(TAG,"Public Link = " + file.getPublicLink());
  }
}
