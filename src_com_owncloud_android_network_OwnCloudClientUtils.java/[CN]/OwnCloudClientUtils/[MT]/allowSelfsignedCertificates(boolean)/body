{
  Protocol pr=null;
  try {
    pr=Protocol.getProtocol("https");
    if (pr != null && mDefaultHttpsProtocol == null) {
      mDefaultHttpsProtocol=pr;
    }
  }
 catch (  IllegalStateException e) {
  }
  boolean isAllowed=(pr != null && pr.getSocketFactory() instanceof EasySSLSocketFactory);
  if (allow && !isAllowed) {
    Protocol.registerProtocol("https",new Protocol("https",new EasySSLSocketFactory(),443));
  }
 else   if (!allow && isAllowed) {
    if (mDefaultHttpsProtocol != null) {
      Protocol.registerProtocol("https",mDefaultHttpsProtocol);
    }
  }
}
