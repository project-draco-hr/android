{
  super.onCreateContextMenu(menu,v,menuInfo);
  MenuInflater inflater=getSherlockActivity().getMenuInflater();
  inflater.inflate(R.menu.upload_actions_menu,menu);
  ExpandableListContextMenuInfo info=(ExpandableListContextMenuInfo)menuInfo;
  int childPosition=ExpandableListView.getPackedPositionChild(info.packedPosition);
  int groupPosition=ExpandableListView.getPackedPositionGroup(info.packedPosition);
  UploadDbObject uploadFile=(UploadDbObject)mAdapter.getChild(groupPosition,childPosition);
  if (userCanCancelUpload(uploadFile)) {
    MenuItem item=menu.findItem(R.id.action_remove_upload);
    if (item != null) {
      item.setVisible(false);
      item.setEnabled(false);
    }
  }
 else {
    MenuItem item=menu.findItem(R.id.action_cancel_upload);
    if (item != null) {
      item.setVisible(false);
      item.setEnabled(false);
    }
  }
  if (!userCanRetryUpload(uploadFile)) {
    MenuItem item=menu.findItem(R.id.action_retry_upload);
    if (item != null) {
      item.setVisible(false);
      item.setEnabled(false);
    }
  }
}
