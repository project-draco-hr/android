{
  AccountManager accMan=AccountManager.get(this);
  mAccounts=accMan.getAccountsByType(AccountAuthenticator.ACCOUNT_TYPE);
  mAccountList=(ListPreference)findPreference("select_oc_account");
  mAccountList.setOnPreferenceChangeListener(this);
  Account defaultAccount=AccountUtils.getCurrentOwnCloudAccount(this);
  if (defaultAccount != null) {
    mAccountList.setSummary(defaultAccount.name);
  }
  String[] accNames=new String[mAccounts.length];
  for (int i=0; i < mAccounts.length; i++) {
    Account account=mAccounts[i];
    accNames[i]=account.name;
  }
  mAccountList.setEntries(accNames);
  mAccountList.setEntryValues(accNames);
}
