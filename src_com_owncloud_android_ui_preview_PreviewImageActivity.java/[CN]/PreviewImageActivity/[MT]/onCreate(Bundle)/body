{
  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
  setContentView(R.layout.preview_image_activity);
  ActionBar actionBar=getSupportActionBar();
  actionBar.setIcon(DisplayUtils.getSeasonalIconId());
  actionBar.setDisplayHomeAsUpEnabled(true);
  actionBar.hide();
  if (PinCheck.checkIfPinEntry()) {
    Intent i=new Intent(MainApp.getAppContext(),PinCodeActivity.class);
    i.putExtra(PinCodeActivity.EXTRA_ACTIVITY,"FileDisplayActivity");
    startActivity(i);
  }
  if (isHoneycombOrHigher()) {
    mFullScreenAnchorView=getWindow().getDecorView();
    mFullScreenAnchorView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener(){
      @SuppressLint("InlinedApi") @Override public void onSystemUiVisibilityChange(      int flags){
        boolean visible=(flags & View.SYSTEM_UI_FLAG_HIDE_NAVIGATION) == 0;
        ActionBar actionBar=getSupportActionBar();
        if (visible) {
          actionBar.show();
        }
 else {
          actionBar.hide();
        }
      }
    }
);
  }
  if (savedInstanceState != null) {
    mRequestWaitingForBinder=savedInstanceState.getBoolean(KEY_WAITING_FOR_BINDER);
  }
 else {
    mRequestWaitingForBinder=false;
  }
}
