{
  if (!PreferenceManager.getDefaultSharedPreferences(context).getBoolean("instant_uploading",false)) {
    Log.d(TAG,"Instant upload disabled, abording uploading");
    return;
  }
  if (intent.getAction().equals(android.net.ConnectivityManager.CONNECTIVITY_ACTION)) {
    handleConnectivityAction(context,intent);
  }
 else   if (intent.getAction().equals(NEW_PHOTO_ACTION)) {
    handleNewPhotoAction(context,intent);
  }
 else {
    Log.e(TAG,"Incorrect intent sent: " + intent.getAction());
  }
}
