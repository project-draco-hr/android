{
  Exception ret=null;
  SSLException e=null;
  Throwable cause=null;
  if (result.getException() instanceof SSLException) {
    e=(SSLException)result.getException();
    if (e instanceof SSLPeerUnverifiedException) {
      ret=e;
    }
 else {
      cause=e.getCause();
      Throwable previousCause=null;
      boolean recoverableCertException=false;
      while (cause != null && cause != previousCause && !recoverableCertException) {
        recoverableCertException=(cause instanceof CertPathValidatorException || cause instanceof CertificateExpiredException || cause instanceof CertificateNotYetValidException);
        if (recoverableCertException)         ret=(Exception)cause;
        previousCause=cause;
        cause=cause.getCause();
      }
    }
  }
  return ret;
}
