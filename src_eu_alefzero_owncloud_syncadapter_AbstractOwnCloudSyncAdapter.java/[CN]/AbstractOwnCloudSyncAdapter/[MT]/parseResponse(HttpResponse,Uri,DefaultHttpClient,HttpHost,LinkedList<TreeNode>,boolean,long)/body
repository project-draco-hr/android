{
  boolean skipFirst=sf, override_parent=!sf;
  for (  TreeNode n : WebdavUtils.parseResponseToNodes(resp.getEntity().getContent())) {
    if (skipFirst) {
      skipFirst=false;
      continue;
    }
    String path=n.stripPathFromFilename(uri.getPath());
    long mod=n.getProperty(NodeProperty.LAST_MODIFIED_DATE) == null ? 0 : Long.parseLong(n.getProperty(NodeProperty.LAST_MODIFIED_DATE));
    OCFile file=getStorageManager().getFileByPath(n.getProperty(NodeProperty.PATH));
    if (file != null && file.fileExists() && file.getModificationTimestamp() >= mod) {
      Log.d(TAG,"No update for file/dir " + file.getFileName() + " is needed");
    }
 else {
      Log.d(TAG,"File " + n.getProperty(NodeProperty.PATH) + " will be "+ (file.fileExists() ? "updated" : "created"));
      long len=n.getProperty(NodeProperty.CONTENT_LENGTH) == null ? 0 : Long.parseLong(n.getProperty(NodeProperty.CONTENT_LENGTH));
      long create=n.getProperty(NodeProperty.CREATE_DATE) == null ? 0 : Long.parseLong(n.getProperty(NodeProperty.CREATE_DATE));
      file=new OCFile(n.getProperty(NodeProperty.PATH));
      file.setFileLength(len);
      file.setCreationTimestamp(create);
      file.setModificationTimestamp(mod);
      file.setMimetype(n.getProperty(NodeProperty.RESOURCE_TYPE));
      file.setParentId(parent_id);
      getStorageManager().saveFile(file);
      if (override_parent) {
        parent_id=file.getFileId();
        override_parent=false;
      }
    }
    if (!TextUtils.isEmpty(n.getProperty(NodeProperty.NAME)) && n.getProperty(NodeProperty.RESOURCE_TYPE).equals("DIR")) {
      HttpPropFind method=new HttpPropFind(uri.getPath() + path + n.getProperty(NodeProperty.NAME).replace(" ","%20")+ "/");
      HttpResponse response=fireRawRequest(method);
      parseResponse(response,uri,client,targetHost,n.getChildList(),true,file.getFileId());
    }
  }
}
