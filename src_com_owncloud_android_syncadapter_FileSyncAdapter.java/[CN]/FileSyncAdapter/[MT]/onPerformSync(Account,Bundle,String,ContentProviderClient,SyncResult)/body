{
  mCancellation=false;
  mIsManualSync=extras.getBoolean(ContentResolver.SYNC_EXTRAS_MANUAL,false);
  mRightSync=true;
  this.setAccount(account);
  this.setContentProvider(provider);
  this.setStorageManager(new FileDataStorageManager(account,getContentProvider()));
  Log.d(TAG,"syncing owncloud account " + account.name);
  sendStickyBroadcast(true,null);
  try {
    updateOCVersion();
    mCurrentSyncTime=System.currentTimeMillis();
    if (!mCancellation) {
      fetchData(OCFile.PATH_SEPARATOR,syncResult,DataStorageManager.ROOT_PARENT_ID);
    }
 else {
      Log.d(TAG,"Leaving synchronization before any remote request due to cancellation was requested");
    }
  }
  finally {
    mRightSync&=(syncResult.stats.numIoExceptions == 0 && syncResult.stats.numAuthExceptions == 0 && syncResult.stats.numParseExceptions == 0);
    if (!mRightSync && mIsManualSync) {
      syncResult.tooManyRetries=true;
      notifyFailedSynchronization();
    }
    sendStickyBroadcast(false,null);
  }
}
