{
  mUsername=mAccount.name.substring(0,mAccount.name.indexOf('@'));
  mPassword=mAccountManager.getPassword(mAccount);
  setContentView(R.layout.uploader_layout);
  mCursor=managedQuery(ProviderMeta.ProviderTableMeta.CONTENT_URI,null,ProviderTableMeta.FILE_CONTENT_TYPE + "=? AND " + ProviderTableMeta.FILE_ACCOUNT_OWNER+ "=?",new String[]{"DIR",mAccount.name},null);
  ListView lv=getListView();
  lv.setOnItemClickListener(this);
  SimpleCursorAdapter sca=new SimpleCursorAdapter(this,R.layout.uploader_list_item_layout,mCursor,new String[]{ProviderTableMeta.FILE_NAME},new int[]{R.id.textView1});
  setListAdapter(sca);
  Button btn=(Button)findViewById(R.id.uploader_choose_folder);
  btn.setOnClickListener(this);
  if (getIntent().getAction().equals(Intent.ACTION_SEND_MULTIPLE)) {
    Button createDirBtn=new Button(this);
    createDirBtn.setId(android.R.id.button1);
    createDirBtn.setText(R.string.uploader_btn_create_dir_text);
    createDirBtn.setOnClickListener(this);
    ((LinearLayout)findViewById(R.id.linearLayout1)).addView(createDirBtn,LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
  }
}
