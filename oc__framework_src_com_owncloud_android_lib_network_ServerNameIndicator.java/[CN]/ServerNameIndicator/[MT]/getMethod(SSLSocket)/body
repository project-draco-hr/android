{
  final Class<?> sslSocketClass=sslSocket.getClass();
  final ServerNameIndicator instance=mSingleInstance.get();
  if (instance == null) {
    return initFrom(sslSocketClass);
  }
 else   if (instance.mSSLSocketClassRef.get() != sslSocketClass) {
    return initFrom(sslSocketClass);
  }
 else   if (instance.mSetHostnameMethodRef == null) {
    return null;
  }
 else {
    final Method cachedSetHostnameMethod=instance.mSetHostnameMethodRef.get();
    return (cachedSetHostnameMethod == null) ? initFrom(sslSocketClass) : cachedSetHostnameMethod;
  }
}
