{
  int status=-1;
  boolean savedFile=false;
  mGet=new GetMethod(client.getBaseUri() + WebdavUtils.encodePath(mRemotePath));
  Iterator<OnDatatransferProgressListener> it=null;
  FileOutputStream fos=null;
  try {
    status=client.executeMethod(mGet);
    if (isSuccess(status)) {
      targetFile.createNewFile();
      BufferedInputStream bis=new BufferedInputStream(mGet.getResponseBodyAsStream());
      fos=new FileOutputStream(targetFile);
      long transferred=0;
      Header contentLength=mGet.getResponseHeader("Content-Length");
      long totalToTransfer=(contentLength != null && contentLength.getValue().length() > 0) ? Long.parseLong(contentLength.getValue()) : 0;
      byte[] bytes=new byte[4096];
      int readResult=0;
      while ((readResult=bis.read(bytes)) != -1) {
synchronized (mCancellationRequested) {
          if (mCancellationRequested.get()) {
            mGet.abort();
            throw new OperationCancelledException();
          }
        }
        fos.write(bytes,0,readResult);
        transferred+=readResult;
synchronized (mDataTransferListeners) {
          it=mDataTransferListeners.iterator();
          while (it.hasNext()) {
            it.next().onTransferProgress(readResult,transferred,totalToTransfer,targetFile.getName());
          }
        }
      }
      savedFile=true;
    }
 else {
      client.exhaustResponse(mGet.getResponseBodyAsStream());
    }
  }
  finally {
    if (fos != null)     fos.close();
    if (!savedFile && targetFile.exists()) {
      targetFile.delete();
    }
    mGet.releaseConnection();
  }
  return status;
}
