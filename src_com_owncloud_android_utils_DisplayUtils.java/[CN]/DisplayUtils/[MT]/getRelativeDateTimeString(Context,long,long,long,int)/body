{
  CharSequence dateString="";
  if (time > System.currentTimeMillis()) {
    return DisplayUtils.unixTimeToHumanReadable(time);
  }
 else   if ((System.currentTimeMillis() - time) < 60 * 1000) {
    return c.getString(R.string.file_list_seconds_ago);
  }
 else {
    if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.HONEYCOMB && (System.currentTimeMillis() - time) > 24 * 60 * 60* 1000) {
      Date date=new Date(time);
      date.setHours(0);
      date.setMinutes(0);
      date.setSeconds(0);
      dateString=DateUtils.getRelativeDateTimeString(c,date.getTime(),minResolution,transitionResolution,flags);
    }
 else {
      dateString=DateUtils.getRelativeDateTimeString(c,time,minResolution,transitionResolution,flags);
    }
  }
  String[] parts=dateString.toString().split(",");
  if (parts.length == 2) {
    if (parts[0].contains(":") && !parts[1].contains(":")) {
      return parts[1];
    }
 else     if (parts[1].contains(":") && !parts[0].contains(":")) {
      return parts[0];
    }
  }
  return DisplayUtils.unixTimeToHumanReadable(time);
}
