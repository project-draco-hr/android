{
  Bundle response=new Bundle();
  response.putString(AccountManager.KEY_ACCOUNT_NAME,mAccount.name);
  response.putString(AccountManager.KEY_ACCOUNT_TYPE,mAccount.type);
  if (AccountTypeUtils.getAuthTokenTypeAccessToken(MainApp.getAccountType()).equals(mAuthTokenType)) {
    response.putString(AccountManager.KEY_AUTHTOKEN,mAuthToken);
    mAccountMgr.setAuthToken(mAccount,mAuthTokenType,mAuthToken);
  }
 else   if (AccountTypeUtils.getAuthTokenTypeSamlSessionCookie(MainApp.getAccountType()).equals(mAuthTokenType)) {
    String username=getUserNameForSaml();
    if (username == null)     return false;
    if (!mUsernameInput.getText().toString().equals(username)) {
      RemoteOperationResult result=new RemoteOperationResult(ResultCode.ACCOUNT_NOT_THE_SAME);
      updateAuthStatusIconAndText(result);
      showAuthStatus();
      Log_OC.d(TAG,result.getLogMessage());
      return false;
    }
    response.putString(AccountManager.KEY_AUTHTOKEN,mAuthToken);
    mAccountMgr.setAuthToken(mAccount,mAuthTokenType,mAuthToken);
  }
 else {
    response.putString(AccountManager.KEY_AUTHTOKEN,mPasswordInput.getText().toString());
    mAccountMgr.setPassword(mAccount,mPasswordInput.getText().toString());
  }
  setAccountAuthenticatorResult(response);
  return true;
}
