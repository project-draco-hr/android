{
  mOauth2GetAccessTokenOpId=-1;
  try {
    dismissDialog(DIALOG_OAUTH2_LOGIN_PROGRESS);
  }
 catch (  IllegalArgumentException e) {
  }
  String webdav_path=AccountUtils.getWebdavPath(mDiscoveredVersion,mAuthTokenType);
  if (result.isSuccess() && webdav_path != null) {
    showDialog(DIALOG_LOGIN_PROGRESS);
    @SuppressWarnings("unchecked") Map<String,String> tokens=(Map<String,String>)(result.getData().get(0));
    mAuthToken=tokens.get(OAuth2Constants.KEY_ACCESS_TOKEN);
    Log_OC.d(TAG,"Got ACCESS TOKEN: " + mAuthToken);
    mAuthCheckOperation=new ExistenceCheckRemoteOperation("",this,false);
    OwnCloudClient client=OwnCloudClientFactory.createOwnCloudClient(Uri.parse(mHostBaseUrl + webdav_path),this,true);
    client.setBearerCredentials(mAuthToken);
    mAuthCheckOperation.execute(client,this,mHandler);
  }
 else {
    updateAuthStatusIconAndText(result);
    showAuthStatus();
    Log_OC.d(TAG,"Access failed: " + result.getLogMessage());
  }
}
