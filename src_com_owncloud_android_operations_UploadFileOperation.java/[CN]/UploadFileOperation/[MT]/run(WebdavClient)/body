{
  RemoteOperationResult result=null;
  boolean nameCheckPassed=false;
  try {
    if (!mForceOverwrite) {
      String remotePath=getAvailableRemotePath(client,mRemotePath);
      mWasRenamed=!remotePath.equals(mRemotePath);
      if (mWasRenamed) {
        createNewOCFile(remotePath);
      }
    }
    nameCheckPassed=true;
synchronized (mCancellationRequested) {
      if (mCancellationRequested.get()) {
        throw new OperationCancelledException();
      }
 else {
        mPutMethod=new PutMethod(client.getBaseUri() + WebdavUtils.encodePath(mRemotePath));
      }
    }
    int status=uploadFile(client);
    result=new RemoteOperationResult(isSuccess(status),status);
    Log.i(TAG,"Upload of " + mFile.getStoragePath() + " to "+ mRemotePath+ ": "+ result.getLogMessage());
  }
 catch (  Exception e) {
    if (mCancellationRequested.get()) {
      result=new RemoteOperationResult(new OperationCancelledException());
    }
 else {
      result=new RemoteOperationResult(e);
    }
    Log.e(TAG,"Upload of " + mFile.getStoragePath() + " to "+ mRemotePath+ ": "+ result.getLogMessage()+ (nameCheckPassed ? "" : " (while checking file existence in server)"),result.getException());
  }
  return result;
}
