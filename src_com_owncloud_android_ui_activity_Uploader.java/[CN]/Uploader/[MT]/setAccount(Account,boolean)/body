{
  if (somethingToUpload()) {
    mAccountManager=(AccountManager)getSystemService(Context.ACCOUNT_SERVICE);
    Account[] accounts=mAccountManager.getAccountsByType(MainApp.getAccountType());
    if (accounts.length == 0) {
      Log_OC.i(TAG,"No ownCloud account is available");
      showDialog(DIALOG_NO_ACCOUNT);
    }
 else     if (accounts.length > 1 && !mAccountSelected && !mAccountSelectionShowing) {
      Log_OC.i(TAG,"More than one ownCloud is available");
      showDialog(DIALOG_MULTIPLE_ACCOUNT);
      mAccountSelectionShowing=true;
    }
 else {
      if (!savedAccount) {
        setAccount(accounts[0]);
      }
    }
  }
 else {
    showDialog(DIALOG_NO_STREAM);
  }
  IntentFilter syncIntentFilter=new IntentFilter(RefreshFolderOperation.EVENT_SINGLE_FOLDER_CONTENTS_SYNCED);
  syncIntentFilter.addAction(RefreshFolderOperation.EVENT_SINGLE_FOLDER_SHARES_SYNCED);
  mSyncBroadcastReceiver=new SyncBroadcastReceiver();
  registerReceiver(mSyncBroadcastReceiver,syncIntentFilter);
  super.setAccount(account,savedAccount);
}
