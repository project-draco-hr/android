{
  setContentView(R.layout.uploader_layout);
  String current_dir=mParents.peek();
  if (current_dir.equals("")) {
    getSupportActionBar().setTitle(getString(R.string.default_display_name_for_root_folder));
  }
 else {
    getSupportActionBar().setTitle(current_dir);
  }
  boolean notRoot=(mParents.size() > 1);
  ActionBar actionBar=getSupportActionBar();
  actionBar.setDisplayHomeAsUpEnabled(notRoot);
  actionBar.setHomeButtonEnabled(notRoot);
  String full_path=generatePath(mParents);
  Log_OC.d(TAG,"Populating view with content of : " + full_path);
  mFile=mStorageManager.getFileByPath(full_path);
  Log_OC.d(TAG,"directory exists: " + (mFile != null));
  if (mFile != null) {
    Vector<OCFile> files=mStorageManager.getFolderContent(mFile);
    List<HashMap<String,OCFile>> data=new LinkedList<HashMap<String,OCFile>>();
    for (    OCFile f : files) {
      HashMap<String,OCFile> h=new HashMap<String,OCFile>();
      h.put("dirname",f);
      data.add(h);
    }
    ImageSimpleAdapter sa=new ImageSimpleAdapter(this,data,R.layout.uploader_list_item_layout,new String[]{},new int[]{},mStorageManager,mAccount);
    setListAdapter(sa);
    Button btn=(Button)findViewById(R.id.uploader_choose_folder);
    btn.setOnClickListener(this);
    getListView().setOnItemClickListener(this);
  }
}
