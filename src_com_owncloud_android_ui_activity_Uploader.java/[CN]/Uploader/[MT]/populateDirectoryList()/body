{
  setContentView(R.layout.uploader_layout);
  String current_dir=mParents.peek();
  if (current_dir.equals("")) {
    getActionBar().setTitle(getString(R.string.default_display_name_for_root_folder));
  }
 else {
    getActionBar().setTitle(current_dir);
  }
  String full_path=generatePath(mParents);
  Log_OC.d(TAG,"Populating view with content of : " + full_path);
  mFile=mStorageManager.getFileByPath(full_path);
  if (mFile != null) {
    Vector<OCFile> files=mStorageManager.getFolderContent(mFile);
    List<HashMap<String,Object>> data=new LinkedList<HashMap<String,Object>>();
    for (    OCFile f : files) {
      HashMap<String,Object> h=new HashMap<String,Object>();
      if (f.isFolder()) {
        h.put("dirname",f.getFileName());
        data.add(h);
      }
    }
    SimpleAdapter sa=new SimpleAdapter(this,data,R.layout.uploader_list_item_layout,new String[]{"dirname"},new int[]{R.id.textView1});
    setListAdapter(sa);
    Button btn=(Button)findViewById(R.id.uploader_choose_folder);
    btn.setOnClickListener(this);
    getListView().setOnItemClickListener(this);
  }
}
