{
  View view=inflater.inflate(R.layout.share_file_layout,container,false);
  ImageView icon=(ImageView)view.findViewById(R.id.shareFileIcon);
  icon.setImageResource(MimetypeIconUtil.getFileTypeIconId(mFile.getMimetype(),mFile.getFileName()));
  if (mFile.isImage()) {
    String remoteId=String.valueOf(mFile.getRemoteId());
    Bitmap thumbnail=ThumbnailsCacheManager.getBitmapFromDiskCache(remoteId);
    if (thumbnail != null) {
      icon.setImageBitmap(thumbnail);
    }
  }
  TextView filename=(TextView)view.findViewById(R.id.shareFileName);
  filename.setText(mFile.getFileName());
  TextView size=(TextView)view.findViewById(R.id.shareFileSize);
  if (mFile.isFolder()) {
    size.setVisibility(View.GONE);
  }
 else {
    size.setText(DisplayUtils.bytesToHumanReadable(mFile.getFileLength()));
  }
  Button addUserGroupButton=(Button)view.findViewById(R.id.addUserButton);
  addUserGroupButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      boolean shareWithUsersEnable=AccountUtils.hasSearchUsersSupport(mAccount);
      if (shareWithUsersEnable) {
        mListener.showSearchUsersAndGroups();
      }
 else {
        String message=getString(R.string.share_sharee_unavailable);
        Toast.makeText(getActivity(),message,Toast.LENGTH_LONG).show();
      }
    }
  }
);
  mOnShareViaLinkSwitchCheckedChangeListener=new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (isResumed()) {
        if (isChecked) {
          ((FileActivity)getActivity()).getFileOperationsHelper().shareFileViaLink(mFile);
        }
 else {
          ((FileActivity)getActivity()).getFileOperationsHelper().unshareFileViaLink(mFile);
        }
      }
    }
  }
;
  Switch shareViaLinkSwitch=(Switch)view.findViewById(R.id.shareViaLinkSectionSwitch);
  shareViaLinkSwitch.setOnCheckedChangeListener(mOnShareViaLinkSwitchCheckedChangeListener);
  Switch shareViaLinkExpirationSwitch=(Switch)view.findViewById(R.id.shareViaLinkExpirationSwitch);
  shareViaLinkExpirationSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (isChecked) {
        getExpirationDateValue().setText(R.string.placeholder_timestamp);
      }
 else {
        getExpirationDateValue().setText(R.string.empty);
      }
    }
  }
);
  Switch shareViaLinkPasswordSwitch=(Switch)view.findViewById(R.id.shareViaLinkPasswordSwitch);
  shareViaLinkPasswordSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (isChecked) {
        getExpirationPasswordValue().setVisibility(View.VISIBLE);
      }
 else {
        getExpirationPasswordValue().setVisibility(View.INVISIBLE);
      }
    }
  }
);
  return view;
}
