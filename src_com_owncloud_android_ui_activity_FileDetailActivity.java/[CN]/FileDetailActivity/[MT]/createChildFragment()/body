{
  OCFile file=getIntent().getParcelableExtra(FileDetailFragment.EXTRA_FILE);
  Account account=getIntent().getParcelableExtra(FileDetailFragment.EXTRA_ACCOUNT);
  int mode=getIntent().getIntExtra(EXTRA_MODE,MODE_PREVIEW);
  Fragment newFragment=null;
  if (FilePreviewFragment.canBePreviewed(file) && mode == MODE_PREVIEW) {
    if (file.isDown()) {
      newFragment=new FilePreviewFragment(file,account);
    }
 else {
      newFragment=new FileDetailFragment(file,account);
      mWaitingToPreview=true;
    }
  }
 else {
    newFragment=new FileDetailFragment(file,account);
  }
  FragmentTransaction ft=getSupportFragmentManager().beginTransaction();
  ft.replace(R.id.fragment,newFragment,FileDetailFragment.FTAG);
  ft.commit();
}
