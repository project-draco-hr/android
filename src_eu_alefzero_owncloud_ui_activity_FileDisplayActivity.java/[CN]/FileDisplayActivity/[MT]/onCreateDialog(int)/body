{
  Dialog dialog=null;
  AlertDialog.Builder builder;
switch (id) {
case DIALOG_SETUP_ACCOUNT:
    builder=new AlertDialog.Builder(this);
  builder.setTitle(R.string.main_tit_accsetup);
builder.setMessage(R.string.main_wrn_accsetup);
builder.setCancelable(false);
builder.setPositiveButton(android.R.string.ok,this);
builder.setNegativeButton(android.R.string.cancel,this);
dialog=builder.create();
break;
case DIALOG_ABOUT_APP:
{
builder=new AlertDialog.Builder(this);
builder.setTitle("About");
PackageInfo pkg;
try {
pkg=getPackageManager().getPackageInfo(getPackageName(),0);
builder.setMessage("ownCloud android client\n\nversion: " + pkg.versionName);
builder.setIcon(android.R.drawable.ic_menu_info_details);
dialog=builder.create();
}
 catch (NameNotFoundException e) {
builder=null;
dialog=null;
e.printStackTrace();
}
break;
}
case DIALOG_CREATE_DIR:
{
builder=new Builder(this);
final EditText dirNameInput=new EditText(getBaseContext());
final Account a=AccountUtils.getCurrentOwnCloudAccount(this);
builder.setView(dirNameInput);
builder.setTitle(R.string.uploader_info_dirname);
int typed_color=getResources().getColor(R.color.setup_text_typed);
dirNameInput.setTextColor(typed_color);
builder.setPositiveButton(android.R.string.ok,new OnClickListener(){
public void onClick(DialogInterface dialog,int which){
String directoryName=dirNameInput.getText().toString();
if (directoryName.trim().length() == 0) {
dialog.cancel();
return;
}
String path;
if (mCurrentDir == null) {
if (!mStorageManager.fileExists("/")) {
OCFile file=new OCFile("/");
mStorageManager.saveFile(file);
}
mCurrentDir=mStorageManager.getFileByPath("/");
}
path=FileDisplayActivity.this.mCurrentDir.getRemotePath();
path+=Uri.encode(directoryName) + "/";
Thread thread=new Thread(new DirectoryCreator(path,a));
thread.start();
OCFile newDir=new OCFile(path);
newDir.setMimetype("DIR");
newDir.setParentId(mCurrentDir.getFileId());
mStorageManager.saveFile(newDir);
dialog.dismiss();
mFileList.listDirectory(mCurrentDir);
}
}
);
builder.setNegativeButton(R.string.common_cancel,new OnClickListener(){
public void onClick(DialogInterface dialog,int which){
dialog.cancel();
}
}
);
dialog=builder.create();
break;
}
default :
dialog=null;
}
return dialog;
}
