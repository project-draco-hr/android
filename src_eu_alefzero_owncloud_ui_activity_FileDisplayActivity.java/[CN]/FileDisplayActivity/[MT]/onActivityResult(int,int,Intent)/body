{
  if (requestCode == ACTION_SELECT_FILE) {
    if (resultCode == RESULT_OK) {
      String filepath=null;
      try {
        Uri selectedImageUri=data.getData();
        String filemanagerstring=selectedImageUri.getPath();
        String selectedImagePath=getPath(selectedImageUri);
        if (selectedImagePath != null)         filepath=selectedImagePath;
 else         filepath=filemanagerstring;
      }
 catch (      Exception e) {
        Log.e("FileDisplay","Unexpected exception when trying to read the result of Intent.ACTION_GET_CONTENT",e);
        e.printStackTrace();
      }
 finally {
        if (filepath == null) {
          Log.e("FileDisplay","Couldnt resolve path to file");
          Toast t=Toast.makeText(this,getString(R.string.filedisplay_unexpected_bad_get_content),Toast.LENGTH_LONG);
          t.show();
          return;
        }
      }
      Intent i=new Intent(this,FileUploader.class);
      i.putExtra(FileUploader.KEY_ACCOUNT,AccountUtils.getCurrentOwnCloudAccount(this));
      String remotepath=new String();
      for (int j=mDirectories.getCount() - 2; j >= 0; --j) {
        remotepath+=OCFile.PATH_SEPARATOR + mDirectories.getItem(j);
      }
      if (!remotepath.endsWith(OCFile.PATH_SEPARATOR))       remotepath+=OCFile.PATH_SEPARATOR;
      remotepath+=new File(filepath).getName();
      i.putExtra(FileUploader.KEY_LOCAL_FILE,filepath);
      i.putExtra(FileUploader.KEY_REMOTE_FILE,remotepath);
      i.putExtra(FileUploader.KEY_UPLOAD_TYPE,FileUploader.UPLOAD_SINGLE_FILE);
      startService(i);
    }
  }
}
