{
  if (requestCode == ACTION_SELECT_FILE) {
    if (resultCode == RESULT_OK) {
      Uri selectedImageUri=data.getData();
      String filemanagerstring=selectedImageUri.getPath();
      String selectedImagePath=getPath(selectedImageUri);
      String filepath;
      if (selectedImagePath != null)       filepath=selectedImagePath;
 else       filepath=filemanagerstring;
      if (filepath == null) {
        Log.e("FileDisplay","Couldnt resolve path to file");
        return;
      }
      Intent i=new Intent(this,FileUploader.class);
      i.putExtra(FileUploader.KEY_ACCOUNT,AccountUtils.getCurrentOwnCloudAccount(this));
      String remotepath=new String();
      for (int j=mDirectories.getCount() - 2; j >= 0; --j) {
        remotepath+=OCFile.PATH_SEPARATOR + mDirectories.getItem(j);
      }
      if (!remotepath.endsWith(OCFile.PATH_SEPARATOR))       remotepath+=OCFile.PATH_SEPARATOR;
      remotepath+=new File(filepath).getName();
      i.putExtra(FileUploader.KEY_LOCAL_FILE,filepath);
      i.putExtra(FileUploader.KEY_REMOTE_FILE,remotepath);
      i.putExtra(FileUploader.KEY_UPLOAD_TYPE,FileUploader.UPLOAD_SINGLE_FILE);
      startService(i);
    }
  }
}
