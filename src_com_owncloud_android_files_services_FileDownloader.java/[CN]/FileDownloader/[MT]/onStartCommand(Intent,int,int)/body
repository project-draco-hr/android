{
  if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_FILE_PATH) || !intent.hasExtra(EXTRA_REMOTE_PATH)) {
    Log.e(TAG,"Not enough information provided in intent");
    return START_NOT_STICKY;
  }
  Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
  String filePath=intent.getStringExtra(EXTRA_FILE_PATH);
  String remotePath=intent.getStringExtra(EXTRA_REMOTE_PATH);
  long totalDownloadSize=intent.getLongExtra(EXTRA_FILE_SIZE,-1);
  AbstractList<String> requestedDownloads=new Vector<String>();
  String downloadKey=buildRemoteName(account.name,remotePath);
  try {
    DownloadFileOperation newDownload=new DownloadFileOperation(account,filePath,remotePath,(String)null,totalDownloadSize,false);
    mPendingDownloads.putIfAbsent(downloadKey,newDownload);
    newDownload.addDatatransferProgressListener(this);
    requestedDownloads.add(downloadKey);
  }
 catch (  IllegalArgumentException e) {
    Log.e(TAG,"Not enough information provided in intent: " + e.getMessage());
    return START_NOT_STICKY;
  }
  if (requestedDownloads.size() > 0) {
    Message msg=mServiceHandler.obtainMessage();
    msg.arg1=startId;
    msg.obj=requestedDownloads;
    mServiceHandler.sendMessage(msg);
  }
  return START_NOT_STICKY;
}
