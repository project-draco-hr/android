{
  if (!intent.hasExtra(EXTRA_ACCOUNT) || !intent.hasExtra(EXTRA_FILE)) {
    Log.e(TAG,"Not enough information provided in intent");
    return START_NOT_STICKY;
  }
  Account account=intent.getParcelableExtra(EXTRA_ACCOUNT);
  OCFile file=intent.getParcelableExtra(EXTRA_FILE);
  AbstractList<String> requestedDownloads=new Vector<String>();
  String downloadKey=buildRemoteName(account,file);
  try {
    DownloadFileOperation newDownload=new DownloadFileOperation(account,file);
    mPendingDownloads.putIfAbsent(downloadKey,newDownload);
    newDownload.addDatatransferProgressListener(this);
    requestedDownloads.add(downloadKey);
  }
 catch (  IllegalArgumentException e) {
    Log.e(TAG,"Not enough information provided in intent: " + e.getMessage());
    return START_NOT_STICKY;
  }
  if (requestedDownloads.size() > 0) {
    Message msg=mServiceHandler.obtainMessage();
    msg.arg1=startId;
    msg.obj=requestedDownloads;
    mServiceHandler.sendMessage(msg);
  }
  return START_NOT_STICKY;
}
