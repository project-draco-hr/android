{
synchronized (mPendingDownloads) {
    mCurrentDownload=mPendingDownloads.get(downloadKey);
  }
  if (mCurrentDownload != null) {
    notifyDownloadStart(mCurrentDownload);
    if (mDownloadClient == null || !mLastAccount.equals(mCurrentDownload.getAccount())) {
      mLastAccount=mCurrentDownload.getAccount();
      mStorageManager=new FileDataStorageManager(mLastAccount,getContentResolver());
      mDownloadClient=OwnCloudClientUtils.createOwnCloudClient(mLastAccount,getApplicationContext());
    }
    RemoteOperationResult downloadResult=null;
    try {
      downloadResult=mCurrentDownload.execute(mDownloadClient);
      if (downloadResult.isSuccess()) {
        saveDownloadedFile();
      }
    }
  finally {
synchronized (mPendingDownloads) {
        mPendingDownloads.remove(downloadKey);
      }
    }
    notifyDownloadResult(mCurrentDownload,downloadResult);
    sendFinalBroadcast(mCurrentDownload,downloadResult);
  }
}
