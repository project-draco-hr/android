{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.pincodelock);
  Intent intent=getIntent();
  activity=intent.getStringExtra(EXTRA_ACTIVITY);
  bCancel=(Button)findViewById(R.id.cancel);
  mPinHdr=(TextView)findViewById(R.id.pinHdr);
  mPinHdrExplanation=(TextView)findViewById(R.id.pinHdrExpl);
  mText1=(EditText)findViewById(R.id.txt1);
  mText1.requestFocus();
  getWindow().setSoftInputMode(android.view.WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
  mText2=(EditText)findViewById(R.id.txt2);
  mText3=(EditText)findViewById(R.id.txt3);
  mText4=(EditText)findViewById(R.id.txt4);
  boolean customButtons=getResources().getBoolean(R.bool.custom_buttons);
  if (customButtons)   bCancel.setBackgroundResource(R.drawable.btn_default);
  SharedPreferences appPrefs=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
  if ((appPrefs.getString("PrefPinCode1",null) == null)) {
    setChangePincodeView(true);
    pinCodeChecked=true;
    newPasswordEntered=true;
  }
 else {
    if (appPrefs.getBoolean("set_pincode",false)) {
      if (activity.equals("preferences")) {
        mPinHdr.setText(R.string.pincode_configure_your_pin);
        mPinHdrExplanation.setVisibility(View.VISIBLE);
        pinCodeChecked=true;
        setChangePincodeView(true);
      }
 else {
        bCancel.setVisibility(View.INVISIBLE);
        bCancel.setVisibility(View.GONE);
        mPinHdr.setText(R.string.pincode_enter_pin_code);
        mPinHdrExplanation.setVisibility(View.INVISIBLE);
        setChangePincodeView(false);
      }
    }
 else {
      mPinHdr.setText(R.string.pincode_remove_your_pincode);
      mPinHdrExplanation.setVisibility(View.INVISIBLE);
      pinCodeChecked=false;
      setChangePincodeView(true);
    }
  }
  setTextListeners();
}
