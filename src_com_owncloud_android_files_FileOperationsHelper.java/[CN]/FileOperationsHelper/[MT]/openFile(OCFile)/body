{
  if (file != null) {
    String storagePath=file.getStoragePath();
    String encodedStoragePath=WebdavUtils.encodePath(storagePath);
    Intent intentForSavedMimeType=new Intent(Intent.ACTION_VIEW);
    intentForSavedMimeType.setDataAndType(Uri.parse("file://" + encodedStoragePath),file.getMimetype());
    intentForSavedMimeType.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
    Intent intentForGuessedMimeType=null;
    if (storagePath.lastIndexOf('.') >= 0) {
      String guessedMimeType=MimeTypeMap.getSingleton().getMimeTypeFromExtension(storagePath.substring(storagePath.lastIndexOf('.') + 1));
      if (guessedMimeType != null && !guessedMimeType.equals(file.getMimetype())) {
        intentForGuessedMimeType=new Intent(Intent.ACTION_VIEW);
        intentForGuessedMimeType.setDataAndType(Uri.parse("file://" + encodedStoragePath),guessedMimeType);
        intentForGuessedMimeType.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
      }
    }
    Intent chooserIntent;
    List<ResolveInfo> launchables;
    if (intentForGuessedMimeType != null) {
      chooserIntent=Intent.createChooser(intentForGuessedMimeType,mFileActivity.getString(R.string.actionbar_open_with));
      launchables=mFileActivity.getPackageManager().queryIntentActivities(intentForGuessedMimeType,PackageManager.GET_INTENT_FILTERS);
    }
 else {
      chooserIntent=Intent.createChooser(intentForSavedMimeType,mFileActivity.getString(R.string.actionbar_open_with));
      launchables=mFileActivity.getPackageManager().queryIntentActivities(intentForSavedMimeType,PackageManager.GET_INTENT_FILTERS);
    }
    if (launchables != null && launchables.size() > 0) {
      try {
        mFileActivity.startActivity(chooserIntent);
      }
 catch (      ActivityNotFoundException anfe) {
        Toast.makeText(mFileActivity.getApplicationContext(),R.string.file_list_no_app_for_file_type,Toast.LENGTH_SHORT).show();
      }
    }
 else {
      Toast.makeText(mFileActivity.getApplicationContext(),R.string.file_list_no_app_for_file_type,Toast.LENGTH_SHORT).show();
    }
  }
 else {
    Log_OC.wtf(TAG,"Trying to open a NULL OCFile");
  }
}
