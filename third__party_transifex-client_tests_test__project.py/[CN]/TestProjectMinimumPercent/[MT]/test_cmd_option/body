def test_cmd_option(self):
    'Test command-line option.'
    self.p.minimum_perc = 20
    results = itertools.cycle([80, 90])

    def side_effect(*args):
        return results.next()
    with patch.object(self.p, 'get_resource_option') as mock:
        mock.side_effect = side_effect
        self.assertFalse(self.p._satisfies_min_translated({'completed': '12%', }))
        self.assertTrue(self.p._satisfies_min_translated({'completed': '20%', }))
        self.assertTrue(self.p._satisfies_min_translated({'completed': '30%', }))
