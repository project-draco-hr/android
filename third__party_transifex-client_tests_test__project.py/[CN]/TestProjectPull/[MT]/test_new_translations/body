def test_new_translations(self):
    'Test finding new transaltions to add.'
    with patch.object(self.p, 'do_url_request') as resource_mock:
        resource_mock.return_value = json.dumps(self.details)
        files_keys = self.langs
        new_trans = self.p._new_translations_to_add
        for force in [True, False]:
            res = new_trans(self.files, self.slang, self.lang_map, self.stats, force)
            self.assertEquals(res, set([]))
        with patch.object(self.p, '_should_add_translation') as filter_mock:
            filter_mock.return_value = True
            for force in [True, False]:
                res = new_trans({'el': None, }, self.slang, self.lang_map, self.stats, force)
                self.assertEquals(res, set(['pt']))
            for force in [True, False]:
                res = new_trans({}, self.slang, self.lang_map, self.stats, force)
                self.assertEquals(res, set(['el', 'pt']))
            files = {}
            files['pt_PT'] = None
            lang_map = {'pt': 'pt_PT', }
            for force in [True, False]:
                res = new_trans(files, self.slang, lang_map, self.stats, force)
                self.assertEquals(res, set(['el']))
