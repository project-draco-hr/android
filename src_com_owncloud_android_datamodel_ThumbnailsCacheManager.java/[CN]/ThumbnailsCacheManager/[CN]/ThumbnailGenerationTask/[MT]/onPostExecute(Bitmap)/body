{
  if (isCancelled()) {
    bitmap=null;
  }
  if (mImageViewReference != null && bitmap != null) {
    final ImageView imageView=mImageViewReference.get();
    final ThumbnailGenerationTask bitmapWorkerTask=getBitmapWorkerTask(imageView);
    if (this == bitmapWorkerTask && imageView != null && imageView.getTag() != null && mFile != null) {
      if (imageView.getTag().equals(mFile.getFileId())) {
        imageView.setImageBitmap(bitmap);
      }
    }
  }
}
