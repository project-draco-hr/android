{
  Bitmap thumbnail=null;
  try {
    mFile=params[0];
    final String imageKey=String.valueOf(mFile.hashCode());
    thumbnail=getBitmapFromDiskCache(imageKey);
    if (thumbnail == null) {
      Resources r=MainApp.getAppContext().getResources();
      int px=(int)Math.round(r.getDimension(R.dimen.file_icon_size));
      Bitmap bitmap=BitmapUtils.decodeSampledBitmapFromFile(mFile.getAbsolutePath(),px,px);
      if (bitmap != null) {
        thumbnail=ThumbnailUtils.extractThumbnail(bitmap,px,px);
        addBitmapToCache(imageKey,thumbnail);
      }
    }
  }
 catch (  Throwable t) {
    Log_OC.e(TAG,"Generation of thumbnail for " + mFile + " failed",t);
    if (t instanceof OutOfMemoryError) {
      System.gc();
    }
  }
  return thumbnail;
}
