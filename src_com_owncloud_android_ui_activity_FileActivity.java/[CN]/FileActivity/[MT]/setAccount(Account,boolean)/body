{
  Account oldAccount=mAccount;
  boolean validAccount=(account != null && AccountUtils.setCurrentOwnCloudAccount(getApplicationContext(),account.name));
  if (validAccount) {
    mAccount=account;
    mAccountWasSet=true;
    mAccountWasRestored=(savedAccount || mAccount.equals(oldAccount));
  }
 else {
    swapToDefaultAccount();
  }
  AccountManager accountMngr=AccountManager.get(getBaseContext());
  if (mAccount != null) {
    mIsSharedSupported=Boolean.parseBoolean(accountMngr.getUserData(mAccount,OwnCloudAccount.Constants.KEY_SUPPORTS_SHARE_API));
  }
}
