{
  if (file != null) {
    String link="https://fake.url.lolo";
    Intent chooserIntent=null;
    List<Intent> targetedShareIntents=new ArrayList<Intent>();
    List<ResolveInfo> resInfo=getPackageManager().queryIntentActivities(createShareWithLinkIntent(link),PackageManager.MATCH_DEFAULT_ONLY);
    String myPackageName=getPackageName();
    if (!resInfo.isEmpty()) {
      for (      ResolveInfo info : resInfo) {
        if (!info.activityInfo.packageName.equalsIgnoreCase(myPackageName)) {
          Intent targetedShare=createTargetedShare(link,info.activityInfo.applicationInfo.packageName,info.activityInfo.name);
          targetedShareIntents.add(targetedShare);
        }
      }
    }
    if (targetedShareIntents.size() > 0) {
      Intent firstTargeted=targetedShareIntents.remove(0);
      chooserIntent=Intent.createChooser(firstTargeted,getString(R.string.action_share_file));
      chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS,targetedShareIntents.toArray(new Parcelable[]{}));
    }
 else {
      chooserIntent=Intent.createChooser(null,getString(R.string.action_share_file));
    }
    startActivity(chooserIntent);
  }
 else {
    Log_OC.wtf(TAG,"Trying to open a NULL OCFile");
  }
}
