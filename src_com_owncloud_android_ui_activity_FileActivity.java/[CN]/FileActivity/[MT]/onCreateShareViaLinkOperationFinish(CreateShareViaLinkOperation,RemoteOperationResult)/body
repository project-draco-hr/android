{
  if (result.isSuccess()) {
    updateFileFromDB();
    Intent sendIntent=operation.getSendIntentWithSubject(this);
    if (sendIntent != null) {
      startActivity(sendIntent);
    }
  }
 else {
    if (result.getCode() == ResultCode.SHARE_FORBIDDEN) {
      String password=operation.getPassword();
      if ((password == null || password.length() == 0) && getCapabilities().getFilesSharingPublicEnabled().isUnknown()) {
        SharePasswordDialogFragment dialog=SharePasswordDialogFragment.newInstance(new OCFile(operation.getPath()),true);
        dialog.show(getSupportFragmentManager(),DIALOG_SHARE_PASSWORD);
      }
 else {
        Toast t=Toast.makeText(this,ErrorMessageAdapter.getErrorCauseMessage(result,operation,getResources()),Toast.LENGTH_LONG);
        t.show();
      }
    }
 else {
      Toast t=Toast.makeText(this,ErrorMessageAdapter.getErrorCauseMessage(result,operation,getResources()),Toast.LENGTH_LONG);
      t.show();
    }
  }
}
